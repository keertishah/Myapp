{"version":3,"sources":["aws-exports.js","component/Progress.js","component/MedicalForm.js","App.js","serviceWorker.js","index.js"],"names":["awsmobile","aws_project_region","aws_cognito_identity_pool_id","aws_cognito_region","aws_user_pools_id","aws_user_pools_web_client_id","aws_user_files_s3_bucket","aws_user_files_s3_bucket_region","Step","Steps","STATUS","Progress","this","props","status","display","marginRight","react_default","a","createElement","steps","title","icon","type","description","getPhotoStatus","getFormStatus","getResultStatus","style","marginLeft","getStyle","welcomePageSteps","otherPagesSteps","Component","FormItem","Form","Item","MedicalForm","Select","Option","Radio","Button","Group","_this","formItemLayout","labelCol","span","wrapperCol","es_form","Object","assign","label","TextArea_default","date_picker","className","rate","es_button","onClick","callback","Amplify","configure","Logger","LOG_LEVEL","WELCOME","KEEP_IMAGE_USER_DECISION","TAKE_SHOT","LOADING","WAITING_FOR_PROCESSING","DISPLAY_GOOD_RESULT","DISPLAY_BAD_RESULT","NO_CAMERA_DETECTED","NO_FACE_DETECTED","IMAGE_DOWNLOADED","BACKEND_TIMEOUT","FILL_FORM","CAMERA","REAR","FRONT","SINGLE","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","waittime","videoRef","React","createRef","canvasRef","containerRef","sendsound","Audio","deletesound","shotsound","processound","addEventListener","currentTime","play","state","stream","camera","fullscreen","processedImage","filePrefix","Storage","level","returnToCapture","message","warning","setState","image","_this2","filename","Date","now","put","UPLOAD_S3_PREFIX","contentType","then","result","console","log","waitForImageFromBackend","catch","err","error","current","toBlob","uploadImage","bind","context","getContext","width","videoWidth","height","videoHeight","drawImage","_this3","navigator","mediaDevices","enumerateDevices","deviceInfos","gotDevices","e","alert","concat","name","_this4","numberOfCameras","i","length","deviceInfo","document","value","deviceId","kind","cameraStatus","newStatus","getUserMedia","audio","video","displayWebcamOutput","webcamStream","srcObject","IMAGE_SENT_CONFIRMATION","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","_this5","constraints","exact","close","saveBase64AsFile","base64","fileName","link","setAttribute","click","pause","_this6","get","download","gotResultFromBackend","JSON","parse","Body","toString","setTimeout","fetchImage","backendTimedOut","gotAFace","isSick","Labels","Name","Confidence","random","Math","nextStatus","_this7","ref","src","component_Progress","takeShot","saveImage","ignoreImage","videoStyle","muted","autoPlay","playsInline","canvasStyle","displayError","displayClose","component_MedicalForm","sendDataToBackend","es_alert","showIcon","displayNewDiag","startCapturingWebCam","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"wUAaeA,EAXI,CACfC,mBAAsB,YACtBC,6BAAgC,iDAChCC,mBAAsB,YACtBC,kBAAqB,sBACrBC,6BAAgC,6BAChCC,yBAA4B,kCAC5BC,gCAAmC,8BCNjCC,EAAOC,IAAMD,KAEbE,EACK,eADLA,EAEsB,2BAFtBA,EAGO,YAHPA,EAKoB,6BALpBA,EAWO,2BA+EEC,2LAvEX,OAAQC,KAAKC,MAAMC,QACjB,KAAKJ,EACH,MAAO,OACT,QACE,MAAO,6CAIX,OAAQE,KAAKC,MAAMC,QACjB,KAAKJ,EACH,MAAO,CAACK,QAAS,QACnB,QACE,MAAO,CAACA,QAAW,cAAeC,YAAe,iDAIrD,OAAQJ,KAAKC,MAAMC,QACjB,KAAKJ,EACL,KAAKA,EACL,KAAKA,EACH,MAAO,OACT,QACE,MAAO,qDAIX,OAAQE,KAAKC,MAAMC,QACjB,KAAKJ,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACH,MAAO,OACT,KAAKA,EACH,MAAO,UACT,QACE,MAAO,sDAKX,OACAO,EAAAC,EAAAC,cAACC,EAAA,EAAD,KACEH,EAAAC,EAAAC,cAACX,EAAD,CAAMM,OAAO,SAASO,MAAM,iBAAiBC,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,UAAYC,YAAY,iFACtFP,EAAAC,EAAAC,cAACX,EAAD,CAAMM,OAASF,KAAKa,iBAAmBJ,MAAM,gBAAgBC,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,WAAaC,YAAY,yCACvGP,EAAAC,EAAAC,cAACX,EAAD,CAAMM,OAASF,KAAKc,gBAAkBL,MAAM,4BAA4BC,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,SAAWC,YAAY,gCAChHP,EAAAC,EAAAC,cAACX,EAAD,CAAMM,OAASF,KAAKe,kBAAoBN,MAAM,qBAAqBC,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,cAAgBC,YAAY,mFAMlH,OACAP,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAOQ,MAAO,CAACC,WAAc,SAC3BZ,EAAAC,EAAAC,cAACX,EAAD,CAAMoB,MAAOhB,KAAKkB,WAAYhB,OAAO,SAASQ,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,YAC/DN,EAAAC,EAAAC,cAACX,EAAD,CAAMoB,MAAOhB,KAAKkB,WAAYhB,OAASF,KAAKa,iBAAmBH,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,aAChFN,EAAAC,EAAAC,cAACX,EAAD,CAAMoB,MAAOhB,KAAKkB,WAAYhB,OAASF,KAAKc,gBAAkBJ,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,WAC/EN,EAAAC,EAAAC,cAACX,EAAD,CAAMoB,MAAOhB,KAAKkB,WAAYhB,OAASF,KAAKe,kBAAoBL,KAAML,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMC,KAAK,kDAMnF,OAAGX,KAAKC,MAAMC,SAAWJ,EAChBE,KAAKmB,mBAELnB,KAAKoB,yBAtEKC,4ECfjBC,EAAWC,IAAKC,KAsEPC,GArEAC,IAAOC,OACFC,IAAMC,OACPD,IAAME,MAOdzB,EAAAC,EAAAC,cAAA,0BAWAF,EAAAC,EAAAC,cAAA,4MAMA,IAAAwB,EAAA/B,KAEDgC,EAAiB,CACrBC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEtB,OACE7B,EAAAC,EAAAC,cAAC6B,EAAA,EAAD,KACE/B,EAAAC,EAAAC,cAACe,EAADe,OAAAC,OAAA,GACMN,EADN,CAEEO,MAAM,yBAENlC,EAAAC,EAAAC,cAACiC,EAAAlC,EAAD,OAEFD,EAAAC,EAAAC,cAACe,EAADe,OAAAC,OAAA,GACMN,EADN,CAEEO,MAAM,uBAENlC,EAAAC,EAAAC,cAACiC,EAAAlC,EAAD,OAEFD,EAAAC,EAAAC,cAACe,EAADe,OAAAC,OAAA,GACMN,EADN,CAEEO,MAAM,gCAENlC,EAAAC,EAAAC,cAACkC,EAAA,EAAD,OAEFpC,EAAAC,EAAAC,cAACe,EAADe,OAAAC,OAAA,GACMN,EADN,CAEEO,MAAM,qBAERlC,EAAAC,EAAAC,cAAA,QAAMmC,UAAU,OAAhB,OAJA,IAIiCrC,EAAAC,EAAAC,cAACoC,EAAA,EAAD,MAJjC,IAI0CtC,EAAAC,EAAAC,cAAA,QAAMmC,UAAU,QAAhB,SAE1CrC,EAAAC,EAAAC,cAACe,EACKU,EAEJ3B,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQC,QAAS,kBAAMd,EAAK9B,MAAM6C,YAAYnC,KAAK,WAAnD,wBArCgBU,qBCnB1B0B,IAAQC,UAAU5D,GAClB2D,IAAQE,OAAOC,UAAY,OAE3B,IAIMpD,EAAS,CACbqD,QAAS,eACTC,yBAA0B,2BAC1BC,UAAW,YACXC,QAAS,UACTC,uBAAwB,6BACxBC,oBAAqB,oBACrBC,mBAAoB,mBACpBC,mBAAoB,sBACpBC,iBAAkB,oBAClBC,iBAAkB,sCAClBC,gBAAiB,iCACjBC,UAAW,4BAIPC,EAAS,CACbC,KAAM,WACNC,MAAO,YACPC,OAAQ,yBAqdKC,cAhdb,SAAAA,IAAa,IAAApC,EAAA,OAAAM,OAAA+B,EAAA,EAAA/B,CAAArC,KAAAmE,IACXpC,EAAAM,OAAAgC,EAAA,EAAAhC,CAAArC,KAAAqC,OAAAiC,EAAA,EAAAjC,CAAA8B,GAAAI,KAAAvE,QACKwE,SAAW,EAChBzC,EAAK0C,SAAWC,IAAMC,YACtB5C,EAAK6C,UAAYF,IAAMC,YACvB5C,EAAK8C,aAAeH,IAAMC,YAC1B5C,EAAK+C,UAAY,IAAIC,MAAM,oBAC3BhD,EAAKiD,YAAc,IAAID,MAAM,qBAC7BhD,EAAKkD,UAAY,IAAIF,MAAM,wBAC3BhD,EAAKmD,YAAc,IAAIH,MAAM,0BAC7BhD,EAAKmD,YAAYC,iBAAiB,QAAS,WACvCnF,KAAKoF,YAAc,EACnBpF,KAAKqF,SACN,GAEHtD,EAAKuD,MAAQ,CACXC,OAAQ,KACRC,OAAQzB,EAAOG,OACfuB,YAAY,EACZC,eAAgB,KAChBC,WAAY,GACZzF,OAAQJ,EAAOqD,SArBNpB,mFA0BX6D,UAAQ5C,UAAU,CAAE6C,MAAO,kDAM3B7F,KAAKgF,YAAYK,OACjBrF,KAAK8F,4DAILC,IAAQC,QAAQ,sCAAuC,GACvDhG,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQJ,EAAOuD,gDAIP6C,GAAO,IAAAC,EAAAnG,KACboG,EAAWC,KAAKC,MACpBV,UAAQW,IAAIC,WAAyBJ,EAAW,OAAQF,EAAO,CAAEO,YAAa,cAC7EC,KAAM,SAAAC,GACLC,QAAQC,IAAI,eACZV,EAAKF,SACL,CACEV,OAAQY,EAAKb,MAAMC,OACnBC,OAAQW,EAAKb,MAAME,OACnBC,WAAYU,EAAKb,MAAMG,WACvBC,eAAgBS,EAAKb,MAAMI,eAC3BC,WAAYS,EACZlG,OAAQiG,EAAKb,MAAMpF,SAErBiG,EAAKW,4BAENC,MAAM,SAAAC,GAAG,OAAIJ,QAAQK,MAAMD,iDAK5BhH,KAAKkF,YAAYG,OACjBrF,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMI,eACvBxF,OAAQJ,EAAOyD,yBAEjBvD,KAAK4E,UAAUsC,QAAQC,OAAOnH,KAAKoH,YAAYC,KAAKrH,2CAIpDA,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMI,eACvBxF,OAAQJ,EAAOgE,+CAKjB9D,KAAKiF,UAAUI,OACf,IAAIiC,EAAUtH,KAAK4E,UAAUsC,QAAQK,WAAW,MAChDvH,KAAK4E,UAAUsC,QAAQM,MAAQxH,KAAKyE,SAASyC,QAAQO,WACrDzH,KAAK4E,UAAUsC,QAAQQ,OAAS1H,KAAKyE,SAASyC,QAAQS,YACtDL,EAAQM,UAAU5H,KAAKyE,SAASyC,QAAS,EAAG,EAAGlH,KAAK4E,UAAUsC,QAAQM,MAAOxH,KAAK4E,UAAUsC,QAAQQ,QACpG1H,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQJ,EAAOsD,0EAII,IAAAyE,EAAA7H,KACrB4G,QAAQC,IAAI,oCAEZiB,UAAUC,aAAaC,mBACtBtB,KAAK,SAAAuB,GAAW,OAAIJ,EAAKK,WAAWD,KACpClB,MAAM,SAAAoB,GAAC,OAAIC,MAAK,6BAAAC,OAA8BF,EAAEG,4CAGxCL,GAET,IAFsB,IAAAM,EAAAvI,KAClBwI,EAAkB,EACbC,EAAI,EAAGA,IAAMR,EAAYS,SAAUD,EAAG,CAC7C,IAAIE,EAAaV,EAAYQ,GAEhBG,SAASrI,cAAc,UAC7BsI,MAAQF,EAAWG,SAEF,eAApBH,EAAWI,OACbP,IACA5B,QAAQC,IAAI,qBAAuB8B,EAAWpG,QAIlD,IAAIyG,EAAejF,EAAOG,OACtB+E,EAAYjJ,KAAKsF,MAAMpF,OAC3B,OAAOsI,GACL,KAAK,EACHS,EAAYnJ,EAAO4D,mBACnBkD,QAAQK,MAAM,8BACd,MACF,KAAK,EACH+B,EAAejF,EAAOG,OACtB,MACF,KAAK,EACH8E,EAAejF,EAAOE,MACtB,MACF,QACE+E,EAAejF,EAAOE,MACtB2C,QAAQZ,QAAQ,sCAGpB,GAAGiD,IAAcnJ,EAAO4D,mBAAoB,CAC1CkD,QAAQC,IAAI,4BAKZiB,UAAUC,aAAamB,aAJH,CAClBC,OAAO,EACPC,OAAO,IAGR1C,KAAK,SAAAnB,GAAM,OAAIgD,EAAKc,oBAAoB9D,KACxCwB,MAAM,SAAAoB,GAAC,OAAIC,MAAK,yBAAAC,OAA0BF,EAAEG,SAG/CtI,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQwD,EACRvD,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQ+I,gDAIQK,GAClB1C,QAAQC,IAAI,sCACZ7G,KAAKyE,SAASyC,QAAQqC,UAAYD,EAClCvD,IAAQC,QAAQ,sCAAuC,GACvDhG,KAAKiG,SACL,CACEV,OAAQ+D,EACR9D,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQJ,EAAOuD,kDAKjB,OAAQrD,KAAKsF,MAAMpF,QACjB,KAAKJ,EAAOsD,yBACZ,KAAKtD,EAAO8D,iBACV,MAAO,CAACzD,QAAS,SACnB,QACE,MAAO,CAACA,QAAS,8CAIrB,OAAQH,KAAKsF,MAAMpF,QACjB,KAAKJ,EAAOuD,UACV,MAAO,CAAClD,QAAS,SACnB,QACE,MAAO,CAACA,QAAS,kDAIrB,OAAQH,KAAKsF,MAAMpF,QACjB,KAAKJ,EAAO2D,mBACZ,KAAK3D,EAAO0D,oBACV,OAAO,EACT,QACE,OAAO,0CAIX,OAAQxD,KAAKsF,MAAMpF,QACjB,KAAKJ,EAAO0J,wBACZ,KAAK1J,EAAO8D,iBACZ,KAAK9D,EAAO+D,gBACV,OAAO,EACT,QACE,OAAO,0CAIX,OAAQ7D,KAAKsF,MAAMpF,QACjB,KAAKJ,EAAO4D,mBACZ,KAAK5D,EAAO+D,gBACV,OAAO,EACT,QACE,OAAO,4CAKP7D,KAAK6E,aAAaqC,QAAQuC,kBAC5BzJ,KAAK6E,aAAaqC,QAAQuC,oBACjBzJ,KAAK6E,aAAaqC,QAAQwC,qBACnC1J,KAAK6E,aAAaqC,QAAQwC,uBACjB1J,KAAKyE,SAASyC,QAAQyC,wBAC/B3J,KAAK6E,aAAaqC,QAAQyC,0BACjB3J,KAAKyE,SAASyC,QAAQ0C,qBAC/B5J,KAAK6E,aAAaqC,QAAQ0C,sBAE5B5J,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,YAAY,EACZC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQF,KAAKsF,MAAMpF,kDAKjB0I,SAASiB,eACXjB,SAASiB,iBACAjB,SAASkB,oBAClBlB,SAASkB,sBACAlB,SAASmB,qBAClBnB,SAASmB,uBACAnB,SAASoB,kBAClBpB,SAASoB,mBAGXhK,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,YAAY,EACZC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQF,KAAKsF,MAAMpF,sDAIF,IAAA+J,EAAAjK,KACnB4G,QAAQC,IAAI,iBACZ,IAAMqD,EAAc,CAClBf,OAAO,EACPC,MAAO,CAACN,SAAU9I,KAAKsF,MAAME,SAAWzB,EAAOE,MAAQ,CAACkG,MAAO,GAAK,CAACA,MAAO,KAE9EnK,KAAKsF,MAAMC,OAAO6E,QAClBpK,KAAKiG,SACL,CACEV,OAAQ,KACRC,OAAQxF,KAAKsF,MAAME,SAAWzB,EAAOE,MAAQF,EAAOC,KAAOD,EAAOE,MAClEwB,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQF,KAAKsF,MAAMpF,SAErB4H,UAAUC,aAAamB,aAAagB,GACnCxD,KAAK,SAAAnB,GAAM,OAAI0E,EAAKZ,oBAAoB9D,KACxCwB,MAAM,SAAAoB,GAAC,OAAIC,MAAK,yBAAAC,OAA0BF,EAAEG,mDAI7C1B,QAAQC,IAAI,uEAGZD,QAAQC,IAAI,mEAGZD,QAAQC,IAAI,iBACZ7G,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQJ,EAAO0J,kEAIjB5C,QAAQC,IAAI,kBACZ7G,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB1F,KAAKsF,MAAMI,eAC3BC,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQJ,EAAO8D,mBAEjB5D,KAAKqK,iBAAiBrK,KAAKsF,MAAMI,eAAgB,uBAAyB1F,KAAKsF,MAAMK,WAAa,iDAGnF2E,EAAQC,GACrB,IAAIC,EAAO5B,SAASrI,cAAc,KAClCiK,EAAKC,aAAa,OAAQH,GAC1BE,EAAKC,aAAa,WAAYF,GAC9BC,EAAKE,kDAIP9D,QAAQC,IAAI,qBACZ7G,KAAKkF,YAAYyF,QACjB3K,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgB,KAChBC,WAAY,GACZzF,OAAQJ,EAAO+D,uDAIN,IAAA+G,EAAA5K,KAEX4F,UAAQiF,IAAIrE,WAAyBxG,KAAKsF,MAAMK,WAAa,qBAAsB,CAAEmF,UAAU,IAC9FpE,KAAM,SAAAC,GACHiE,EAAKG,qBAAqBC,KAAKC,MAAMtE,EAAOuE,KAAKC,SAAS,aAE7DpE,MAAM,SAAAC,GACLJ,QAAQC,IAAI,0BACZD,QAAQC,IAAIG,GACZ4D,EAAKpG,UAAY,IACdoG,EAAKpG,SAtYc,KAuYpBoC,QAAQC,IAAI,+BAAiC+D,EAAKpG,UAClD4G,WAAWR,EAAKS,WAAWhE,KAAKuD,GAAO,MAEvCA,EAAKU,sEAKT1E,QAAQC,IAAI,kBACZ7G,KAAKwE,SAAW,EAChBxE,KAAKqL,0DAEc1E,GAInB,IAAI8B,EAHJ7B,QAAQC,IAAI,6BACZ7G,KAAKkF,YAAYyF,QAGjB,IAAIY,GAAW,EACXC,GAAS,EACb,GAA6B,qBAAlB7E,EAAO8E,QAA0B9E,EAAO8E,OAAO/C,OAAS,EACjE,IAAKD,EAAI,EAAGA,EAAI9B,EAAO8E,OAAO/C,OAAQD,IAMlC,GALA7B,QAAQC,IAAI,6BACZD,QAAQC,IAAIF,EAAO8E,OAAOhD,IAC1B7B,QAAQC,IAAIF,EAAO8E,OAAOhD,GAAGiD,MAC7B9E,QAAQC,IAAIF,EAAO8E,OAAOhD,GAAGkD,YACzB/E,QAAQC,IAAI,6BACc,WAA1BF,EAAO8E,OAAOhD,GAAGiD,MAAuB/E,EAAO8E,OAAOhD,GAAGkD,YAAc,GAAK,CAC9EJ,GAAW,EACX,IAAIK,EAASC,KAAKD,SAClBhF,QAAQC,IAAI,WAAY+E,GACxBJ,EAASI,GAAU,IACnBhF,QAAQC,IAAI,WAAY2E,GACxB,MAKR,IAAIM,EAAahM,EAAO0D,oBACpB+H,EAGCC,IACDM,EAAahM,EAAO2D,oBAHtBqI,EAAahM,EAAO6D,iBAOtBiD,QAAQC,IAAI,eAAgBiF,GAE5B9L,KAAKiG,SACL,CACEV,OAAQvF,KAAKsF,MAAMC,OACnBC,OAAQxF,KAAKsF,MAAME,OACnBC,WAAYzF,KAAKsF,MAAMG,WACvBC,eAAgBiB,EAChBhB,WAAY3F,KAAKsF,MAAMK,WACvBzF,OAAQ4L,IAGVlF,QAAQC,IAAIF,oCAGL,IAAAoF,EAAA/L,KACP,OACEK,EAAAC,EAAAC,cAAA,OAAKyL,IAAKhM,KAAK6E,cACbxE,EAAAC,EAAAC,cAAA,OAAKmC,UAAU,WAAUrC,EAAAC,EAAAC,cAAA,OAAKmC,UAAU,OAAOuJ,IAAI,YAAnD,aACA5L,EAAAC,EAAAC,cAAC2L,EAAD,CAAUhM,OAAQF,KAAKsF,MAAMpF,SAE5BF,KAAKsF,MAAMpF,SAAWJ,EAAOuD,WAAahD,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQF,UAAU,SAAS/B,KAAK,UAAUkC,QAAS,kBAAMkJ,EAAKI,aAA9D,gBAC1CnM,KAAKsF,MAAMpF,SAAWJ,EAAOsD,0BAA4B/C,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQF,UAAU,SAAS/B,KAAK,UAAUkC,QAAS,kBAAMkJ,EAAKK,cAA9D,mBACzDpM,KAAKsF,MAAMpF,SAAWJ,EAAOsD,0BAA4B/C,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQF,UAAU,SAASG,QAAS,kBAAMkJ,EAAKM,gBAA/C,gBAE1DhM,EAAAC,EAAAC,cAAA,OAAKmC,UAAU,mBACbrC,EAAAC,EAAAC,cAAA,SAAOS,MAAOhB,KAAKsM,aAAcN,IAAKhM,KAAKyE,SAAU8H,OAAK,EAACC,UAAQ,EAACC,aAAW,IAC/EpM,EAAAC,EAAAC,cAAA,UAAQS,MAAOhB,KAAK0M,cAAeV,IAAKhM,KAAK4E,aAG9C5E,KAAK2M,gBAAkBtM,EAAAC,EAAAC,cAAA,KAAGmC,UAAU,uBAAb,YACvB1C,KAAKsF,MAAMpF,SAAWJ,EAAO4D,oBAAsBrD,EAAAC,EAAAC,cAAA,qDACnDP,KAAKsF,MAAMpF,SAAWJ,EAAO+D,iBAAmBxD,EAAAC,EAAAC,cAAA,sCAEhDP,KAAK4M,gBAAkBvM,EAAAC,EAAAC,cAAA,UAAQmC,UAAU,iBAAiBG,QAAS,kBAAMkJ,EAAKjG,oBAAmBzF,EAAAC,EAAAC,cAAA,KAAGmC,UAAU,kBAAb,UAEjG1C,KAAKsF,MAAMpF,SAAWJ,EAAOgE,WAAazD,EAAAC,EAAAC,cAACsM,EAAD,CAAa/J,SAAU,kBAAMiJ,EAAKe,uBAG5E9M,KAAKsF,MAAMpF,SAAWJ,EAAO6D,kBAAoBtD,EAAAC,EAAAC,cAAA,KAAGmC,UAAU,2BAAb,YACjD1C,KAAKsF,MAAMpF,SAAWJ,EAAO6D,kBAAoBtD,EAAAC,EAAAC,cAACwM,EAAA,EAAD,CAAOrK,UAAU,aAAaqD,QAAQ,gBAAgBnF,YAAY,uFAAuFD,KAAK,QAAQqM,UAAQ,IAE/NhN,KAAKsF,MAAMpF,SAAWJ,EAAO6D,kBAAoBtD,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQF,UAAU,aAAa/B,KAAK,UAAUkC,QAAS,kBAAMkJ,EAAKjG,oBAAlE,SACjD9F,KAAKiN,kBAAoB5M,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQF,UAAU,aAAa/B,KAAK,UAAUkC,QAAS,kBAAMkJ,EAAKjG,oBAAlE,sBAEzB9F,KAAKsF,MAAMpF,SAAWJ,EAAOyD,wBAA0BlD,EAAAC,EAAAC,cAAA,KAAGmC,UAAU,8BAAb,mBAGvD1C,KAAKsF,MAAMpF,SAAWJ,EAAOqD,SAAW9C,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAQjC,KAAK,UAAUkC,QAAS,kBAAMkJ,EAAKmB,yBAA3C,kCA3c/B7L,aC3BE8L,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAOpN,EAAAC,EAAAC,cAACmN,EAAD,MAAS9E,SAAS+E,eAAe,SDuH3C,kBAAmB7F,WACrBA,UAAU8F,cAAcC,MAAMnH,KAAK,SAAAoH,GACjCA,EAAaC","file":"static/js/main.07333deb.chunk.js","sourcesContent":["// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile =  {\n    \"aws_project_region\": \"us-west-2\",\n    \"aws_cognito_identity_pool_id\": \"us-west-2:0eec694c-d342-414c-b013-f4287be80b3d\",\n    \"aws_cognito_region\": \"us-west-2\",\n    \"aws_user_pools_id\": \"us-west-2_HSNXCoZyL\",\n    \"aws_user_pools_web_client_id\": \"6qb152bgmcda8o2qevdsdid2ju\",\n    \"aws_user_files_s3_bucket\": \"imageuploads-mclinical-salaunch\",\n    \"aws_user_files_s3_bucket_region\": \"us-west-2\"\n};\n\n\nexport default awsmobile;\n","import React, { Component } from 'react';\nimport { Steps, Icon } from 'antd';\n\nconst Step = Steps.Step;\n\nconst STATUS = {\n  WELCOME: \"Welcome page\",\n  KEEP_IMAGE_USER_DECISION: \"Keep image user decision\",\n  TAKE_SHOT: \"Take shot\",\n  LOADING: \"Loading\",\n  WAITING_FOR_PROCESSING: \"Wait image to be processed\",\n  DISPLAY_GOOD_RESULT: \"Display good news\",\n  DISPLAY_BAD_RESULT: \"Display bad news\",\n  NO_CAMERA_DETECTED: \"No camera on device\",\n  IMAGE_DOWNLOADED: \"Result image was downloaded by user\",\n  BACKEND_TIMEOUT: \"Backend was too long to answer\",\n  FILL_FORM: \"User is filling the form\"\n}\n\nclass Progress extends Component {\n\n// process, finish\n\n  getPhotoStatus() {\n    switch (this.props.status) {\n      case STATUS.WELCOME:\n        return \"wait\";\n      default:\n        return \"finish\";\n    }\n  }\n  getStyle() {\n    switch (this.props.status) {\n      case STATUS.WELCOME:\n        return {display: \"flex\"};\n      default:\n        return {\"display\": \"inline-flex\", \"marginRight\": \"20px\"};\n    }\n  }\n  getFormStatus() {\n    switch (this.props.status) {\n      case STATUS.WELCOME:\n      case STATUS.TAKE_SHOT:\n      case STATUS.KEEP_IMAGE_USER_DECISION:\n        return \"wait\";\n      default:\n        return \"finnish\";\n    }\n  }\n  getResultStatus() {\n    switch (this.props.status) {\n      case STATUS.WELCOME:\n      case STATUS.TAKE_SHOT:\n      case STATUS.KEEP_IMAGE_USER_DECISION:\n      case STATUS.FILL_FORM:\n        return \"wait\";\n      case STATUS.WAITING_FOR_PROCESSING:\n        return \"process\";\n      default:\n        return \"finnish\";\n    }\n  }\n\n  welcomePageSteps() {\n    return (\n    <Steps>\n      <Step status=\"finish\" title=\"Deposit Checks\" icon={<Icon type=\"smile\" />} description=\"With our new Take Picture feature deposit check from convinence of your home\" />\n      <Step status={ this.getPhotoStatus() } title=\"Front picture\" icon={<Icon type=\"camera\" />} description=\"Take a picture of front of the check\" />\n      <Step status={ this.getFormStatus() } title=\"Provide check information\" icon={<Icon type=\"form\" />} description=\"A small check questionnaire\" />\n      <Step status={ this.getResultStatus() } title=\"Submit the deposit\" icon={<Icon type=\"file-done\" />} description=\"Get your check deposited in seconds\" />\n    </Steps>\n    );\n  }\n\n  otherPagesSteps() {\n    return (\n    <Steps style={{\"marginLeft\": \"25px\"}}>\n      <Step style={this.getStyle()} status=\"finish\" icon={<Icon type=\"smile\" />} />\n      <Step style={this.getStyle()} status={ this.getPhotoStatus() } icon={<Icon type=\"camera\" />} />\n      <Step style={this.getStyle()} status={ this.getFormStatus() } icon={<Icon type=\"form\" />} />\n      <Step style={this.getStyle()} status={ this.getResultStatus() } icon={<Icon type=\"file-done\" />} />\n    </Steps>\n    );\n  }\n\n  render() {\n    if(this.props.status === STATUS.WELCOME) {\n      return this.welcomePageSteps();\n    } else {\n      return this.otherPagesSteps();\n    }\n  }\n\n}\n\nexport default Progress;\n","import React, { Component } from 'react';\nimport { Button, Slider, Form, Icon, Input, Radio, Select, DatePicker, Rate } from 'antd';\nimport TextArea from 'antd/lib/input/TextArea';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst RadioButton = Radio.Button;\nconst RadioGroup = Radio.Group;\n\nconst condition = {\n  0: {\n    style: {\n      color: '#f50',\n    },\n    label: <strong>Very Bad</strong>,\n  },\n  1: '',\n  2: '',\n  3: '',\n  4: '',\n  5: '',\n  6: {\n    style: {\n      color: '#050',\n    },\n    label: <strong>Very Good</strong>,\n  },\n};\n\nclass MedicalForm extends Component {\n\n  render() {\n    //const { getFieldDecorator } = this.props.form;\n    const formItemLayout = {\n      labelCol: { span: 8 },\n      wrapperCol: { span: 12 },\n    };\n    return (\n      <Form>\n        <FormItem\n          {...formItemLayout}\n          label=\"Pay to the order of?\"\n        >\n          <TextArea />\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n          label=\"Check Amount™\"\n        >\n          <TextArea />\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n          label=\"Date Check was Issued™\"\n        >\n          <DatePicker />\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n          label=\"Rate the service\"\n        >\n        <span className=\"bad\">Bad</span> <Rate /> <span className=\"good\">Good</span>\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n        >\n          <Button onClick={() => this.props.callback()} type=\"primary\">Submit form</Button>\n        </FormItem>\n      </Form>\n    );\n  }\n\n}\n\nexport default MedicalForm;\n","import React, { Component } from 'react';\nimport Amplify, { Storage } from 'aws-amplify';\nimport { message, Button, Icon, Alert } from 'antd';\nimport awsmobile from './aws-exports';\nimport Progress from './component/Progress';\n//import BadResult from './component/BadResult';\n//import GoodResult from './component/GoodResult';\n\nimport MedicalForm from './component/MedicalForm';\nimport './App.css';\nAmplify.configure(awsmobile);\nAmplify.Logger.LOG_LEVEL = 'INFO';\n\nconst APPLICATION_TIMEOUT = 8000; // In milliseconds\nconst UPLOAD_S3_PREFIX = \"uploads\";\nconst DOWNLOAD_S3_PREFIX = \"results\";\n\nconst STATUS = {\n  WELCOME: \"Welcome page\",\n  KEEP_IMAGE_USER_DECISION: \"Keep image user decision\",\n  TAKE_SHOT: \"Take shot\",\n  LOADING: \"Loading\",\n  WAITING_FOR_PROCESSING: \"Wait image to be processed\",\n  DISPLAY_GOOD_RESULT: \"Display good news\",\n  DISPLAY_BAD_RESULT: \"Display bad news\",\n  NO_CAMERA_DETECTED: \"No camera on device\",\n  NO_FACE_DETECTED: \"No check detected\",\n  IMAGE_DOWNLOADED: \"Result image was downloaded by user\",\n  BACKEND_TIMEOUT: \"Backend was too long to answer\",\n  FILL_FORM: \"User is filling the form\"\n}\n\n\nconst CAMERA = {\n  REAR: \"rear cam\",\n  FRONT: \"front cam\",\n  SINGLE: \"there is only one cam\"\n}\n\nclass App extends Component {\n\n  constructor(){\n    super();\n    this.waittime = 0;\n    this.videoRef = React.createRef();\n    this.canvasRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.sendsound = new Audio(\"/sounds/send.mp3\");\n    this.deletesound = new Audio(\"/sounds/trash.mp3\");\n    this.shotsound = new Audio(\"/sounds/takeshot.mp3\");\n    this.processound = new Audio(\"/sounds/processing.mp3\");\n    this.processound.addEventListener('ended', function() {\n        this.currentTime = 0;\n        this.play();\n    }, false);\n\n    this.state = {\n      stream: null,\n      camera: CAMERA.SINGLE,\n      fullscreen: false,\n      processedImage: null,\n      filePrefix: \"\",\n      status: STATUS.WELCOME\n    }\n  }\n\n  componentDidMount(){\n    Storage.configure({ level: 'private' });\n  }\n\n\n\n  ignoreImage() {\n    this.deletesound.play();\n    this.returnToCapture();\n  }\n\n  returnToCapture() {\n    message.warning('Take a clear picture of your check.', 2);\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: STATUS.TAKE_SHOT\n    });\n  }\n\n  uploadImage(image) {\n    var filename = Date.now();\n    Storage.put(UPLOAD_S3_PREFIX + '/' + filename + '.png', image, { contentType: 'image/png' })\n    .then (result => {\n      console.log(\"upload done\");\n      this.setState(\n      {\n        stream: this.state.stream,\n        camera: this.state.camera,\n        fullscreen: this.state.fullscreen,\n        processedImage: this.state.processedImage,\n        filePrefix: filename,\n        status: this.state.status\n      });\n      this.waitForImageFromBackend();\n    })\n    .catch(err => console.error(err));\n\n  }\n\n  sendDataToBackend() {\n    this.processound.play();\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.processedImage,\n      status: STATUS.WAITING_FOR_PROCESSING\n    });\n    this.canvasRef.current.toBlob(this.uploadImage.bind(this));\n  }\n  saveImage() {\n\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.processedImage,\n      status: STATUS.FILL_FORM\n    });\n  }\n\n  takeShot() {\n    this.shotsound.play()\n    var context = this.canvasRef.current.getContext('2d');\n    this.canvasRef.current.width = this.videoRef.current.videoWidth;\n    this.canvasRef.current.height = this.videoRef.current.videoHeight;\n    context.drawImage(this.videoRef.current, 0, 0, this.canvasRef.current.width, this.canvasRef.current.height);\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: STATUS.KEEP_IMAGE_USER_DECISION\n    });\n  }\n\n  startCapturingWebCam() {\n    console.log('Check device camera capabilities');\n\n    navigator.mediaDevices.enumerateDevices()\n    .then(deviceInfos => this.gotDevices(deviceInfos))\n    .catch(e => alert(`enumerateDevices() error: ${e.name}`));\n  }\n\n  gotDevices(deviceInfos) {\n    var numberOfCameras = 0;\n    for (var i = 0; i !== deviceInfos.length; ++i) {\n      var deviceInfo = deviceInfos[i];\n\n      var option = document.createElement('option');\n      option.value = deviceInfo.deviceId;\n\n      if (deviceInfo.kind === 'videoinput') {\n        numberOfCameras++;\n        console.log('Find Camera named ' + deviceInfo.label);\n      }\n    }\n\n    var cameraStatus = CAMERA.SINGLE;\n    var newStatus = this.state.status;\n    switch(numberOfCameras) {\n      case 0:\n        newStatus = STATUS.NO_CAMERA_DETECTED;\n        console.error('This device have no camera');\n        break;\n      case 1:\n        cameraStatus = CAMERA.SINGLE;\n        break;\n      case 2:\n        cameraStatus = CAMERA.FRONT;\n        break;\n      default:\n        cameraStatus = CAMERA.FRONT;\n        console.warning('Only the first two camera are used');\n        break;\n    }\n    if(newStatus !== STATUS.NO_CAMERA_DETECTED) {\n      console.log('Requesting webcam access');\n      const constraints = {\n        audio: false,\n        video: true\n      };\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(stream => this.displayWebcamOutput(stream))\n      .catch(e => alert(`getUserMedia() error: ${e.name}`));\n    }\n\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: cameraStatus,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: newStatus\n    });\n  }\n\n  displayWebcamOutput(webcamStream) {\n    console.log('Put stream on video HTML component');\n    this.videoRef.current.srcObject = webcamStream;\n    message.warning('Take a clear picture of your check.', 4);\n    this.setState(\n    {\n      stream: webcamStream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: STATUS.TAKE_SHOT\n    });\n  }\n\n  canvasStyle() {\n    switch (this.state.status) {\n      case STATUS.KEEP_IMAGE_USER_DECISION:\n      case STATUS.IMAGE_DOWNLOADED:\n        return {display: \"block\"};\n      default:\n        return {display: \"none\"};\n    }\n  }\n  videoStyle() {\n    switch (this.state.status) {\n      case STATUS.TAKE_SHOT:\n        return {display: \"block\"};\n      default:\n        return {display: \"none\"};\n    }\n  }\n  displayNewDiag() {\n    switch (this.state.status) {\n      case STATUS.DISPLAY_BAD_RESULT:\n      case STATUS.DISPLAY_GOOD_RESULT:\n        return true;\n      default:\n        return false;\n    }\n  }\n  displayClose() {\n    switch (this.state.status) {\n      case STATUS.IMAGE_SENT_CONFIRMATION:\n      case STATUS.IMAGE_DOWNLOADED:\n      case STATUS.BACKEND_TIMEOUT:\n        return true;\n      default:\n        return false;\n    }\n  }\n  displayError() {\n    switch (this.state.status) {\n      case STATUS.NO_CAMERA_DETECTED:\n      case STATUS.BACKEND_TIMEOUT:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  openFullscreen() {\n    if (this.containerRef.current.requestFullscreen) {\n      this.containerRef.current.requestFullscreen();\n    } else if (this.containerRef.current.mozRequestFullScreen) { /* Firefox */\n      this.containerRef.current.mozRequestFullScreen();\n    } else if (this.videoRef.current.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n      this.containerRef.current.webkitRequestFullscreen();\n    } else if (this.videoRef.current.msRequestFullscreen) { /* IE/Edge */\n      this.containerRef.current.msRequestFullscreen();\n    }\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: true,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: this.state.status\n    });\n  }\n\n  exitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) { /* Firefox */\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */\n      document.webkitExitFullscreen();\n    } else if (document.msExitFullscreen) { /* IE/Edge */\n      document.msExitFullscreen();\n    }\n\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: false,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: this.state.status\n    });\n  }\n\n  changeActiveCamera() {\n    console.log('Switch camera');\n    const constraints = {\n      audio: false,\n      video: {deviceId: this.state.camera === CAMERA.FRONT ? {exact: 0} : {exact: 1}}\n    };\n    this.state.stream.close ();\n    this.setState(\n    {\n      stream: null,\n      camera: this.state.camera === CAMERA.FRONT ? CAMERA.REAR : CAMERA.FRONT,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: this.state.status\n    });\n    navigator.mediaDevices.getUserMedia(constraints)\n    .then(stream => this.displayWebcamOutput(stream))\n    .catch(e => alert(`getUserMedia() error: ${e.name}`));\n  }\n\n  rotateImageLeft() {\n    console.log('rotate image to the left');\n  }\n  rotateImageRight() {\n    console.log('rotate image to the right');\n  }\n  sendByEmail() {\n    console.log('Send by email');\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: STATUS.IMAGE_SENT_CONFIRMATION\n    });\n  }\n  downloadImage() {\n    console.log('Download image');\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: this.state.processedImage,\n      filePrefix: this.state.filePrefix,\n      status: STATUS.IMAGE_DOWNLOADED\n    });\n    this.saveBase64AsFile(this.state.processedImage, \"ReInvent-this.state-\" + this.state.filePrefix + \".png\");\n  }\n\n  saveBase64AsFile(base64, fileName) {\n      var link = document.createElement(\"a\");\n      link.setAttribute(\"href\", base64);\n      link.setAttribute(\"download\", fileName);\n      link.click();\n  }\n\n  backendTimedOut() {\n    console.log(\"Backend timed out\");\n    this.processound.pause();\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: null,\n      filePrefix: \"\",\n      status: STATUS.BACKEND_TIMEOUT\n    });\n  }\n\n  fetchImage() {\n    //Storage.get(UPLOAD_S3_PREFIX + '/' + this.state.filePrefix + '.json', { download: true })\n    Storage.get(UPLOAD_S3_PREFIX + '/' + this.state.filePrefix + '.png-UserData.json', { download: true })\n    .then (result => {\n        this.gotResultFromBackend(JSON.parse(result.Body.toString('utf-8')));\n    })\n    .catch(err => {\n      console.log(\"Backend haven't finish\");\n      console.log(err);\n      this.waittime += 2000;\n      if(this.waittime < APPLICATION_TIMEOUT) {\n        console.log(\"Launch S3 get again, time = \" + this.waittime);\n        setTimeout(this.fetchImage.bind(this), 2000);\n      } else {\n        this.backendTimedOut();\n      }\n    });\n  }\n  waitForImageFromBackend() {\n    console.log('Wait for image');\n    this.waittime = 0;\n    this.fetchImage();\n  }\n  gotResultFromBackend(result) {\n    console.log('Got A RESULT from backend');\n    this.processound.pause();\n\n    var i;\n    var gotAFace = false;\n    var isSick = false;\n    if (typeof result.Labels !== 'undefined' && result.Labels.length > 0) {\n      for (i = 0; i < result.Labels.length; i++) {\n          console.log('========= ITEM ==========');\n          console.log(result.Labels[i]);\n          console.log(result.Labels[i].Name);\n          console.log(result.Labels[i].Confidence);\n              console.log('=========================');\n          if((result.Labels[i].Name === \"Person\") && (result.Labels[i].Confidence >= 95)) {\n            gotAFace = true;\n            var random = Math.random();\n            console.log('random ='+ random);\n            isSick = random >= 0.75;\n            console.log('isSick ='+ isSick);\n            break;\n          }\n      }\n    }\n\n    var nextStatus = STATUS.DISPLAY_GOOD_RESULT;\n    if(!gotAFace) {\n      nextStatus = STATUS.NO_FACE_DETECTED;\n    } else {\n      if(isSick) {\n        nextStatus = STATUS.DISPLAY_BAD_RESULT;\n      }\n    }\n\n    console.log('nextStatus ='+ nextStatus);\n\n    this.setState(\n    {\n      stream: this.state.stream,\n      camera: this.state.camera,\n      fullscreen: this.state.fullscreen,\n      processedImage: result,\n      filePrefix: this.state.filePrefix,\n      status: nextStatus\n    });\n\n    console.log(result);\n  }\n\n  render() {\n    return (\n      <div ref={this.containerRef}>\n        <div className=\"Welcome\"><img className=\"logo\" src=\"aws.png\" /> GFS Bank</div>\n        <Progress status={this.state.status}/>\n\n        {this.state.status === STATUS.TAKE_SHOT && <Button className=\"camera\" type=\"primary\" onClick={() => this.takeShot()}>Take picture</Button> }\n        {this.state.status === STATUS.KEEP_IMAGE_USER_DECISION && <Button className=\"camera\" type=\"primary\" onClick={() => this.saveImage()}>Keep this image</Button> }\n        {this.state.status === STATUS.KEEP_IMAGE_USER_DECISION && <Button className=\"camera\" onClick={() => this.ignoreImage()}>Delete image</Button> }\n\n        <div className=\"video-container\">\n          <video style={this.videoStyle()} ref={this.videoRef} muted autoPlay playsInline/>\n          <canvas style={this.canvasStyle()} ref={this.canvasRef} />\n        </div>\n\n        {this.displayError() && <i className=\"material-icons deco\">mood_bad</i> }\n        {this.state.status === STATUS.NO_CAMERA_DETECTED && <h1>Oh no, it looks that you have no camera</h1> }\n        {this.state.status === STATUS.BACKEND_TIMEOUT && <h1>Oh no, backend times out</h1> }\n\n        {this.displayClose() && <button className=\"btn btn-pos-3l\" onClick={() => this.returnToCapture()}><i className=\"material-icons\">close</i></button> }\n\n        {this.state.status === STATUS.FILL_FORM && <MedicalForm callback={() => this.sendDataToBackend()} /> }\n        \n\n        {this.state.status === STATUS.NO_FACE_DETECTED && <i className=\"material-icons deco_sad\">mood_bad</i> }\n        {this.state.status === STATUS.NO_FACE_DETECTED && <Alert className=\"marginleft\" message=\"Image Failure\" description=\"We were not able to detect your check. Please take a picture closer from the camera.\" type=\"error\" showIcon /> }\n\n        {this.state.status === STATUS.NO_FACE_DETECTED && <Button className=\"marginleft\" type=\"primary\" onClick={() => this.returnToCapture()}>Retry</Button> }\n        {this.displayNewDiag() && <Button className=\"marginleft\" type=\"primary\" onClick={() => this.returnToCapture()}> Start New Deposit</Button> }\n\n        {this.state.status === STATUS.WAITING_FOR_PROCESSING && <i className=\"material-icons deco rotate\">hourglass_empty</i> }\n\n\n        {this.state.status === STATUS.WELCOME && <Button type=\"primary\" onClick={() => this.startCapturingWebCam()}>Start my quick Deposit</Button> }\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}